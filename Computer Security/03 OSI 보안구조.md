03 OSI 보안구조
===

# 1. OSI 보안 구조

## OSI 보안 구조의 핵심 개념

- Security Attack : 
- Security Service : 
- Secuirt Mechanism : Security Service를 보장하기 위한 방법을 말한다.

## Security Attack

보안 공격에는 두가지 종류가 있다.

- Passive Attack : 시스템의 자원에 영향을 끼치지 않지만 시스템의 정보를 사용하거나 배울려는 목적으로 한다.

    - a) Release of message contents
    - b) Traffic analysis

    ![alt](image/03%20release%20of%20message%20contents.jpg)

    Bob과 Alice가 인터넷으로 소통 중에 Darth가 그 내용을 가로채가고 있다. 메시지가 암호화되어 있어 Darth는 그 내용을 분석하고 있다.

    이 처럼 Passive Attack에서는 임의의 접근을 막기 보다는 사전에 메시지의 내용을 암호화하여 예방하는데 집중한다.

- Active Attack : 시스템의 작동이나 자원에 영향을 미치려는 시도이다.

    - a) Masquerade : 가장하다
    - b) Replay
    - c) Modification of messages
    - d) DOS. Denial of service

    ![alt](image/03%20Masquerade.jpg)

    Darth가 Bob으로 위장하여 Alice에게 메시지를 전송한다.

    ![alt](image/03%20Replay.jpg)

    Darth가 Bob의 내용을 가로채고 Alice에게 그 내용을 전송하는 것이다.

    ![alt](image/03%20Modification%20of%20Message.jpg)

    Darth가 Bob의 내용을 가로채고 수정하여 Alice에게 전송하는 것이다.


    ![alt](image/03%20Denial%20of%20service.jpg)

    Darth가 Server에 부하를 걸어 Bob이 해당 서버를 사용하지 못하게 한다.

    그렇다면 active attack에 대해서는 어떻게 대처해야 할까? 서비스의 정지나 딜레이를 감지하고 이를 복구해야 한다. 이는 passive attack과 같은 예방이 아닌 실현 가능한 방안이어야 한다.

## Security Service

Security service는 시스템 또는 데이터 전송의 적절한 보안을 보장하는 서비스이다. OSI 보안 구조에서 어떤 보안 서비스를 제공해야 하는지 언급하고 있다. 하나는 Security Service이며, 나머지는 Availability Service이다.

- Security Service

    - Authentication(인증) : 통신이 진짜 인지 가짜인지 확인하는데 관련이 있다.

        인증 방식은 Peer entitiy authentication(대등 개체 인증)과 Data origin authentication(데이터-출처 인증)이 있다. 대등 개체 인증은 피어의 실체가 협회가 주장하는 실체인지 확인한다. 특히, 대등 개체 인증 서비스는 기업이 이전의 일부 연결에 대해 무단으로 위장하거나 재생을 수행하려고 시도하지 않는 다는 보증을 제공한다. 데이터-출처 인증은 메시지가 자신이 주장하는 출처에서 왔는지 확인한다. 그러나 데이터-출처 인증 서비스는 데이터 단위의 복제나 수정으로부터 보호를 제공할 수 없다. 이 경우 데이터 무결성 서비스를 데이터 오리진 인증 서비스와 연계하여 사용해야 한다.

    - Access control(접근제어)

        접근 제어는 다음 항목들을 제어합니다.

        - 누가 자원에 접근할 수 있는지 제어합니다.
        - 어떤 조건에서 접근이 발생할 수 있는지 제어합니다.
        - 액세스 권한이 있는 사용자가 수행할 수 있는 작업을 제어합니다.

       예를들어, 온라인 뱅킹에서 사용자는 자신의 잔고를 볼 수 있지만 일부 계좌에 대해서는 거래를 할 수 없습니다.

    - Data confidentiality(데이터 기밀성)

        데이터 기밀성은 무단 노출로부터(패시브 공격으로부터) 데이터를 보호합니다.

        - Connection confidentiality (연결 기밀성) - 연결에서 전송되는 모든 데이터에 대한 기밀성을 제공한다.

        - Connectionless confidentiality (비연결 기밀성) - 단일 데이터 단위의 기밀성을 제공한다.

        - Selective field confidentiality (선별 필드 기밀성) - 연결 중 또는 단일 데이터 단위에 있는 데이터 내의 특정 필드만 기밀성을 제공한다.

        - Traffic-Flow Confidentiality (트래픽 플로우 기밀성) - 트래픽 분석에서 손상되거나 간접적으로 파생될 수 있는 정보의 보호를 제공한다.
 
    - Data integrity(데이터 무결성)
    
        수령한 데이터가 인가된 개체가 보낸 것과 정확히 일치한다는 보장, 즉 다음을 포함한다.

      - no modification
      - no insertion
      - no deletion
      - no replay

        데이터 무결성은 active attack(능동적 공격)으로 부터 보호합니다. 복구 시 무결성 또는 복구 없이 무결성(탐지 전용)일 수 있습니다.
 
    - Nonrepudiation(부인봉쇄)

        의사소통에 참여한 개체 중 하나에 의한 거부에 대한 보호. 부인봉쇄는 다음과 관련있을 수 있습니다.
        
        - 출처: 지정된 당사자가 메시지를 보냈다는 증거
        - 대상: 지정된 당사자가 메시지를 수신했다는 증거

        예를들어, 온라인 뱅킹의 사용자가 거래를 했지만 나중에 그것을 부인했다고 상상해 보라. 이런 상황에서 은행이 어떻게 스스로를 보호할 수 있을까?

- Availability Service(가용성 서비스) : 시스템 가용성을 보호하기 위해 시스템을 보호합니다. 특히 DDOS 공격을 다루며, 액세스 제어, 인증 등의 다른 보안 서비스와 함께 동작합니다.

### 보안 서비스와 공격 관계

|                    | Attack                      |                  |             |        |                          |                   |
| ------------------ | --------------------------- | ---------------- | ----------- | ------ | ------------------------ | ----------------- |
|                    | 소극적 공격                 |                  | 적극적 공격 |        |                          |                   |
| 서비스             | Release of message contents | Traffic analysis | Masquerade  | Replay | Modification of messages | Denial of Service |
| 대등 개체 인증     |                             |                  | Y           |        |                          |                   |
| 데이터-출처 인증   |                             |                  | Y           |        |                          |                   |
| 접근제어           |                             |                  | Y           |        |                          |                   |
| 기밀성             | Y                           |                  |             |        |                          |                   |
| 트래픽 흐름 기밀성 |                             | Y                |             |        |                          |                   |
| 데이터 무결성      |                             |                  |             | Y      | Y                        |                   |
| 부인봉쇄           |                             |                  |             |        |                          |                   |
| 가용성             |                             |                  |             |        |                          | Y                 |


## Security Mechanism

보안 공격을 탐지, 방지 또는 복구하도록 설계된 메커니즘입니다. 보안 메커니즘은 보안 서비스를 구현하는 데 사용됩니다. 여기에는 다음이 포함됩니다(X.800).

- 암호화(Encipherment)

    데이터 단위 및 트래픽 흐름 정보의 기밀성을 보호하거나 다른 보안 메커니즘을 지원 또는 보완합니다.

    > 암호 기술은 암호 해독에 사용됩니다.

- 디지털 서명(Digital signature)

    전자 문서에 대한 손으로 작성한 서명의 전자 아날로그를 제공합니다. 손으로 작성한 서명처럼 디지털 서명은 위조할 수 없어야 합니다. 수신인은 이를 확인할 수 있어야 하며, 서명인은 나중에 이를 거부할 수 없어야 합니다. 그러나 손으로 쓴 서명과는 달리 디지털 서명은 서명된 데이터(또는 데이터의 해시)를 통합합니다. 따라서 데이터가 다르면 서명자가 변경되지 않더라도 서명이 달라집니다.

- 접근제어 메커니즘(Access Control Mechanisms)

    인증된 주체 ID, 주체 정보 또는 기능을 사용하여 액세스 권한을 결정하고 적용합니다.
    
    주체가 권한이 없는 리소스 또는 잘못된 액세스 유형을 가진 인증된 리소스를 사용하려고 하는 경우 액세스 제어 기능은 시도를 거부하며 경보를 생성하고 보안 감사 추적의 일부로 기록하기 위해 사건을 추가로 보고할 수 있습니다.

- 데이터 무결성 메커니즘(Data Integrity Mechanisms)

    이러한 데이터 단위 내의 단일 데이터 단위와 필드, 또는 데이터 단위 시퀀스 내의 데이터 단위와 필드의 무결성을 보호합니다.

    일반적으로 데이터 무결성 메커니즘은 이전에 보낸 유효한 메시지를 기록하고 재생하는 방식으로 작동하는 Replay 공격으로부터 보호하지 않습니다. 또한 이러한 데이터 단위 내에서 일련의 데이터 단위 및 필드의 무결성을 보호하려면 일반적으로 시퀀스 번호 지정, 시간 스탬프 지정 또는 암호화 체인과 같은 명시적 순서가 필요합니다.

- 인증 교환(Authentication Exchange)

    주체의 요청된 ID를 확인합니다.

    ITU-T 권장 X.509에 따라, 교환되는 메시지를 보호하기 위해 암호 기술을 사용하는 인증 교환 메커니즘을 지칭하는 강한 용어이다.

    취약성은 인증 교환 메커니즘을 참조하기 어렵습니다. 일반적으로 약한 인증 교환 메커니즘은 수동적인 Release of message contents과 Replay 공격에 취약합니다.

- 트래픽 패딩(Traffic Padding)

    트래픽 분석 공격으로부터 보호합니다.

    트래픽 패딩은 데이터 단위 내에서 통신, 데이터 단위 및 데이터 단위의 잘못된 인스턴스 생성을 의미합니다. 목적은 전송되는 데이터가 실제로 정보를 나타내고 인코딩하는지를 밝히는 데 있지 않습니다. 따라서 트래픽 패딩 메커니즘은 일종의 데이터 기밀 유지 서비스에 의해 보호되는 경우에만 유효할 수 있습니다.        

- 경로 제어(Routing Control)

    데이터 전송을 위한 특정 경로를 동적으로 또는 사전 정렬하여 선택합니다.
    
    통신 시스템은 지속적인 수동 또는 능동 공격이 감지되면 네트워크 서비스 공급자에게 다른 경로를 통해 연결을 설정하도록 지시할 수 있습니다. 마찬가지로 보안 정책에서 특정 보안 레이블을 포함하는 데이터가 특정 네트워크 또는 링크를 통과하는 것을 금지할 수 있습니다.데이터 전송을 위한 특정 경로를 동적으로 또는 사전 정렬하여 선택합니다. 통신 시스템은 지속적인 수동 또는 능동 공격이 감지되면 네트워크 서비스 공급자에게 다른 경로를 통해 연결을 설정하도록 지시할 수 있습니다. 마찬가지로 보안 정책에서 특정 보안 레이블을 포함하는 데이터가 특정 네트워크 또는 링크를 통과하는 것을 금지할 수 있습니다.

- 공증(Notarisation)

    데이터의 무결성, 출발지, 시간 또는 목적지와 같이 둘 이상의 엔티티 간에 전달되는 데이터의 특정 속성을 보장합니다. 보증은 신뢰할 수 있는 타사(TTP)에 의해 테스트 가능한 방식으로 제공됩니다.

## 보안 메커니즘과 보안 서비스의 관계

|                      | 메커니즘 |            |          |              |          |            |          |       |
| :------------------- | :------: | :--------: | :------: | :----------: | :------: | :--------: | :------: | :---: |
| 서비스               |  암호화  | 디저털서명 | 접근제어 | 데이터무결성 | 인증교환 | 트래픽패딩 | 경로제어 | 공증  |
| 대등 개체인증        |    Y     |     Y      |          |              |    Y     |            |          |
| 데이터 출처인증      |    Y     |     Y      |          |              |          |            |          |       |
| 접근제어             |          |            |    Y     |              |          |            |          |       |
| 기밀성               |    Y     |            |          |              |          |            |    Y     |
| 트래픽 플로우 기밀성 |    Y     |            |          |              |          |     Y      |    Y     |       |
| 데이터 무결성        |    Y     |     Y      |          |      Y       |          |            |          |       |
| 부인봉쇄             |          |     Y      |          |      Y       |          |            |          |   Y   |
| 가용성               |          |            |          |      Y       |    Y     |            |          |       |

# 2. 네트워크 보안 모델

![](image/03%20Network%20Security%20Model.jpg)

보안 서비스 설계시 다음을 고려해야 한다.

- 보안을 위한 변환 알고리즘 설계
- 알고리즘에서 사용할 비밀정보 생성
- 비밀정보를 공유하고 분배할 수 있는 방법 개발
- 특정 보안 서비스를 위한 보안 알고리즘 및 비밀정보를  사용할 양쪽 통신 
- 주체가 사용할 프로토콜 구체화

![](image/03%20Network%20Access%20Security%20Model.jpg)
> 네트워크 접근보안 모델